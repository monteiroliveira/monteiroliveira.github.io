#+TITLE: Repositories
#+AUTHOR: Guilherme Monteiro de Oliveira
#+SETUPFILE: ../theme.setup
#+OPTIONS: num:nil

#+NAME: List Repos
#+CAPTION: List generated by github API
#+BEGIN_SRC emacs-lisp :results raw :exports results
(require 'json)
(require 'url)

(with-current-buffer
    (url-retrieve-synchronously "https://api.github.com/users/monteiroliveira/repos" t t)
  (goto-char (point-min))
  (re-search-forward "^$")
  (let ((json-array-type 'list))
    (let ((json (json-read)))
      (mapconcat
       (lambda (repo)
         (let ((name (alist-get 'name repo))
               (url (alist-get 'html_url repo))
               (description (alist-get 'description repo)))
           (format "-----\n* %s\n\n[[%s][Link to the repo]]\n- description: %s\n\n" name url description)))
       json "\n"))))
#+END_SRC
-----
List generated by github API

#+INCLUDE: ./back.org
#+INCLUDE: ./footer.org
